/* ===========================
     Tokens & base styles
     =========================== */
  :root{
    --page-bg: #F8FAFB;
    --surface: #FFFFFF;
    --primary: #4F46E5;
    --primary-hover: #4338CA;
    --accent: #10B981;
    --muted: #6B7280;
    --text: #0F172A;
    --card-border: rgba(15,23,42,0.04);
    --drop-outline: rgba(79,70,229,0.18);
    --drop-outline-weak: rgba(79,70,229,0.12);
    --danger: #DC2626;
    --shadow: 0 6px 18px rgba(12,18,31,0.06);
    --font: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  }

  html,body{height:100%}
  body{
    margin:0;
    font-family:var(--font);
    background:var(--page-bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding-top:24px;
    padding-bottom:40px;
    padding-left:16px;
    padding-right:16px;
    box-sizing:border-box;
  }

  /* Container max-width and side padding switch at 768px */
  .container{
    max-width:1024px;
    margin:0 auto;
    padding-left:0;
    padding-right:0;
  }
  @media(min-width:768px){
    body{padding-left:24px;padding-right:24px}
  }

  /* Header */
  header{
    margin-bottom:16px;
  }
  h1{
    font-size:20px; /* 1.25rem */
    font-weight:600;
    line-height:1.2;
    margin:0;
  }
  p.subtitle{
    margin:8px 0 0 0;
    font-size:13px;
    font-weight:400;
    color:var(--muted);
  }

  /* Controls row */
  .controls{
    display:flex;
    gap:8px;
    margin-top:16px;
    margin-bottom:16px;
    align-items:center;
  }
  .controls .grow{flex:1 1 auto;display:flex;gap:8px;align-items:center}
  .input, textarea, select {
    border:1px solid #E5E7EB;
    border-radius:8px;
    padding:8px 12px;
    font-size:14px;
    height:40px;
    box-sizing:border-box;
    background:white;
    color:var(--text);
  }
  textarea { height:80px; resize:vertical; padding-top:8px; padding-bottom:8px; }

  button.primary{
    height:40px;
    padding:0 16px;
    background:var(--primary);
    color:white;
    border:none;
    border-radius:8px;
    font-weight:500;
    font-size:14px;
    cursor:pointer;
    box-shadow:none;
  }
  button.primary:hover{background:var(--primary-hover)}
  button.secondary{
    height:40px;
    padding:0 12px;
    background:transparent;
    border:1px solid #E5E7EB;
    border-radius:8px;
    font-weight:500;
    font-size:14px;
    cursor:pointer;
  }

  /* Board layout */
  .board{
    display:grid;
    gap:12px;
  }
  @media(min-width:768px){
    .board{grid-template-columns:repeat(3,1fr);gap:16px}
  }
  @media(max-width:767.98px){
    .board{grid-auto-rows: min-content}
    .controls{flex-direction:column; align-items:stretch}
    .controls .row{width:100%}
    .controls button.primary{width:100%}
  }

  /* Column card */
  .column{
    background:var(--surface);
    border-radius:12px;
    padding:16px;
    border:1px solid var(--card-border);
    box-shadow:var(--shadow);
    min-height:120px;
    display:flex;
    flex-direction:column;
  }
  .column.drop-highlight{
    outline:2px dashed var(--drop-outline-weak);
    background: linear-gradient(180deg, rgba(79,70,229,0.03), rgba(255,255,255,0));
  }
  .col-title{
    font-size:16px;
    font-weight:500;
    margin:0 0 12px 0;
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .col-empty{font-size:13px;color:var(--muted); padding:12px 0;}

  /* Task list */
  .task-list{
    display:flex;
    flex-direction:column;
    gap:12px;
    min-height: 8px;
  }

  /* Task card */
  .task-card{
    display:flex;
    align-items:center;
    gap:12px;
    padding:10px 12px;
    background:var(--surface);
    border:1px solid var(--card-border);
    border-radius:10px;
    box-shadow:0 6px 18px rgba(12,18,31,0.06);
    transition:transform 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 160ms cubic-bezier(.2,.9,.2,1), opacity 160ms ease-out;
    cursor:grab;
    will-change: transform;
  }
  .task-card:active{cursor:grabbing}
  .task-card:hover{ transform: translateY(-4px); box-shadow:0 10px 24px rgba(12,18,31,0.09); }
  .task-card.dragging{
    opacity:0.9;
    transform:scale(1.02);
    box-shadow:0 18px 40px rgba(12,18,31,0.12);
  }
  .drag-handle{
    width:32px;
    height:32px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    border-radius:8px;
    background:transparent;
    border:none;
    cursor:grab;
    flex:0 0 32px;
  }
  .task-body{flex:1; min-width:0}
  .task-title{
    font-size:14px;
    font-weight:500;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .task-desc{
    font-size:12px;
    color:var(--muted);
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }
  .task-actions{
    display:flex;
    gap:8px;
    align-items:center;
    margin-left:8px;
  }
  .icon-btn{
    width:32px;
    height:32px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    border-radius:6px;
    background:transparent;
    border:none;
    cursor:pointer;
  }
  .icon-btn:focus{ outline:2px solid var(--primary); }

  .small{
    width:18px;height:18px;
  }

  /* placeholder */
  .placeholder{
    border:2px dashed rgba(79,70,229,0.28);
    background: rgba(79,70,229,0.06);
    border-radius:10px;
    height:54px; /* approximate height of a card */
    transition: all 150ms ease-out;
    flex-shrink: 0;
  }

  /* Modal (Create/Edit) */
  .modal-backdrop{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    background: rgba(2,6,23,0.4);
    z-index:60;
    backdrop-filter: blur(2px);
  }
  .modal{
    width: clamp(280px, 90%, 420px);
    background:white; border-radius:12px; padding:16px; box-shadow:0 18px 40px rgba(12,18,31,0.12);
  }
  .modal .row{margin-bottom:12px}
  .field-label{display:block;font-size:13px;margin-bottom:6px}
  .modal .actions{display:flex;gap:8px;justify-content:flex-end}

  /* toast */
  .toast{
    position:fixed; right:20px; bottom:20px; background:#111827;color:white;padding:10px 12px;border-radius:8px;box-shadow:0 6px 18px rgba(12,18,31,0.12); display:none; z-index:80;
  }

  /* focus ring for keyboard users */
  :focus{outline:2px solid var(--primary); outline-offset:2px}

  /* small utilities */
  .sr-only{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
